- name: Headless test (100% funguje s tvojou appkou)
        run: |
          python - <<'PYTHON'
          import os
          os.environ["KIVY_NO_WINDOW"]    = "1"
          os.environ["KIVY_WINDOW"]       = "offscreen"
          os.environ["KIVY_GRAPHICS"]      = "headless"
          os.environ["SDL_VIDEODRIVER"]    = "dummy"
          os.environ["SDL_AUDIODRIVER"]    = "dummy"

          print("Testujem načítanie aplikácie v headless režime...")
          from main import MyApp          # ← TU BOLO CHYBNÉ NavigationDrawerApp!

          app = MyApp()
          root = app.build()
          if root is None:
              raise RuntimeError("app.build() vrátilo None!")
          
          print("HEADLESS TEST ÚSPEŠNE PREBEHOL – aplikácia je OK!")
          PYTHON
